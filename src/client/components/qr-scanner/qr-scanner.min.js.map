{"version":3,"sources":["qr-scanner.js"],"names":["QrScanner","video","onDecode","canvasSize","DEFAULT_CANVAS_SIZE","$video","$canvas","document","createElement","_onDecode","_active","_paused","width","height","_sourceRect","x","y","_onCanPlay","bind","_onPlay","_onVisibilityChange","addEventListener","_qrWorker","Worker","WORKER_PATH","removeEventListener","stop","postMessage","type","_updateSourceRect","play","_scanFrame","hidden","pause","start","smallestDimension","Math","min","videoWidth","videoHeight","sourceRectSize","round","paused","ended","requestAnimationFrame","scanImage","then","error","console","facingMode","exact","constraintsToTry","forEach","constraint","_getMatchingCameraStream","length","Promise","reject","navigator","mediaDevices","getUserMedia","shift","catch","resolve","window","location","protocol","warn","clearTimeout","_offTimeout","srcObject","_getCameraStream","stream","_setVideoMirror","e","setTimeout","track","getTracks","scaleFactor","style","transform","red","green","blue","data","inversionMode","imageOrFileOrUrl","sourceRect","worker","canvas","fixedCanvasSize","alsoTryWithoutSourceRect","promise","timeout","onMessage","onError","event","errorMessage","message","_loadImage","image","imageData","_getImageData","buffer","sourceRectX","sourceRectY","sourceRectWidth","sourceRectHeight","context","getContext","alpha","imageSmoothingEnabled","drawImage","getImageData","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","OffscreenCanvas","Image","_awaitImageLoad","File","URL","src","createObjectURL","revokeObjectURL","complete","naturalWidth","onLoad"],"mappings":"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","file":"qr-scanner.min.js","sourcesContent":[]}